<kt-portlet>
  <kt-portlet-header [icon]="'fas fa-filter'" [title]="'Tìm kiếm'" [class]="'card-head-lg bgr-custom'"
    (click)="isCollapsed = !isCollapsed">
    <ng-container ktPortletTools>
      <i [hidden]="isCollapsed" class="fas fa-angle-double-down"></i>
      <i [hidden]="!isCollapsed" class="fas fa-angle-double-up"></i>
    </ng-container>
  </kt-portlet-header>
  <kt-portlet-body [ngbCollapse]="isCollapsed">
    <form class="row" [formGroup]="form">
      <div class="col-md-5 row align-items-center mt-2">
        <label class="col-sm-3 col-md-3 pr-md-0 mt-2">Tổ bộ môn :</label>
        <div class=" col-sm-8 ">
          <input type="text" class="form-control mr-10" maxlength="100" placeholder="Nhập tên tổ bộ môn cần tìm ..."
            id="department" formControlName="department" />
        </div>
      </div>
      <div class="col-md-5 row align-items-center  mt-2">

        <label class="col-sm-3 pl-md-0 col-md-4">Cán bộ quản lý :</label>
        <div class=" col-sm-8 ">
          <input type="text" class="form-control" maxlength="100" placeholder="Nhập cán bộ quản lý bộ môn cần tìm ..."
            id="managerment" formControlName="managerment" />
        </div>
      </div>
      <div class="col-md-2 d-flex justify-content-md-end  mt-2">
        <button type="submit" class="btn btn-primary" (click)="search()">
          <i class="fas fa-filter"></i> {{VI_LANG.BUTTON.SEARCH}}
        </button>
      </div>

    </form>
  </kt-portlet-body>
</kt-portlet>

<kt-portlet>
  <kt-portlet-header [icon]="'fa fa-list'" [title]="'Danh sách tổ bộ môn'" [class]="'card-head-lg bgr-custom'">
    <ng-container ktPortletTools>
      <button placement="bottom" ngbTooltip="Thêm mới" type="button" class="btn btn-primary btn-sm mr-2"
        *ktPermission="SchoolFacultyCreate" (click)="openAddFaculty(modelAdd)">
        <i class="fas fa-plus"></i>
      </button>
      <!--           (click)="openAdd = true"-->
      <button placement="bottom" ngbTooltip="Xóa" type="button" class="btn btn-danger btn-sm" [disabled]="delAllbtn"
        *ktPermission="SchoolFacultyDelete" (click)="opendDelete(modelDelete)">
        <i class="far fa-trash-alt"></i>
      </button>
      <!--           (click)="opendDelete()-->
    </ng-container>
  </kt-portlet-header>
  <kt-portlet-body>
    <div style="overflow-x: auto">
      <kendo-grid *ngIf="isLoading$ | async " [data]="gridView" [pageSize]="_pageSize" [pageable]="true"
        [kendoGridSelectBy]="'id'" [selectable]="{checkboxOnly : true}" [selectedKeys]="mySelection"
        (selectedKeysChange)="onChange($event)" [skip]="skip" (pageChange)="pageChange($event)"
        [style]="{'border-radius': '25px'}">
        <kendo-grid-checkbox-column class="text-center" [width]="45" [resizable]="false" [columnMenu]="false"
                                    headerClass="text-center font-weight-bold"
                                    showSelectAll="true">
        </kendo-grid-checkbox-column>
        <kendo-grid-column field="id" title="TT" [width]="45" class="text-center" headerClass="text-center font-weight-bold" editable="false">
          <ng-template kendoGridCellTemplate let-dataItem let-rowIndex="rowIndex">{{rowIndex + 1}}</ng-template>
        </kendo-grid-column>
        <kendo-grid-column [width]="200" field="facultyName" headerClass="text-center font-weight-bold" editor="text" title="Tên tổ bộ môn"></kendo-grid-column>
        <kendo-grid-column [width]="200" field="employeeManagementName" headerClass="text-center font-weight-bold" editor="text" title="Cán bộ quản lý">
        </kendo-grid-column>
        <kendo-grid-column [width]="200" field="note" headerClass="text-center font-weight-bold" editor="text" title="Ghi chú"></kendo-grid-column>
        <kendo-grid-command-column title="Thao tác" headerClass="text-center font-weight-bold" class="text-center" [width]="100">
          <ng-template kendoGridCellTemplate let-isNew="isNew" let-dataItem="dataItem">
            <div class="d-flex justify-content-center align-items-center" kendoTooltip>
              <button title="Sửa" *ktPermission="SchoolFacultyEdit" style="color: #67A7AC"
                (click)="opendAdd(dataItem,modelEdit)" kendoButton [iconClass]="'fas fa-pencil-alt'"></button>
            </div>
          </ng-template>
        </kendo-grid-command-column>
        <ng-template kendoPagerTemplate let-currentPage="currentPage" let-total="total" let-skip="skip"
          let-pageSize="pageSize">
          <div class="d-lg-flex d-md-block justify-content-between w-100">
            <div class="p-1 d-flex d-sm-flex justify-content-between">
              <kendo-dropdownlist style="width: 60px;" [data]="pageSizes" [(ngModel)]="_pageSize"
                (ngModelChange)="pageSizeChange()">
              </kendo-dropdownlist>
              <p class="m-0 pl-3 pt-2">Tổng số: {{total}}. Hiển thị {{total!=0?skip + 1:0}}
                - {{pageSize * currentPage >= total ? total : pageSize * currentPage}}</p>
            </div>
            <div class="d-flex justify-content-center custom-mt-15">
              <kendo-pager-prev-buttons></kendo-pager-prev-buttons>
              <kendo-pager-numeric-buttons [buttonCount]="10"></kendo-pager-numeric-buttons>
              <kendo-pager-next-buttons></kendo-pager-next-buttons>
            </div>
          </div>
        </ng-template>
        <ng-template kendoGridNoRecordsTemplate>
          {{VI_LANG.NOTIFICATION.NO_DATA}}
        </ng-template>
      </kendo-grid>
      <div class="custom-loading-h">
        <div *ngIf="boolPage" class="k-i-loading"></div>
      </div>
    </div>
  </kt-portlet-body>
</kt-portlet>

<ng-template #modelAdd let-c="close" let-d="dismiss">
  <div class="modal-header" style="padding: 10px !important;">
    <h4 class="modal-title" id="modal-basic-title">Thêm mới tổ bộ môn</h4>
    <button kendoButton type="button" (click)="d('Save click')" [iconClass]="'fas fa-times'">
    </button>
  </div>
  <div class="modal-body" style="padding: 0 !important;">
    <kt-detail (deparmentout)="createDeparment($event)"></kt-detail>
  </div>
  <div class="modal-footer">
    <button type="button" class="btn btn-secondary mr-2" (click)="d('Save click')">{{VI_LANG.BUTTON.CLOSE}}
    </button>
    <input type="submit" class="btn  btn-primary" id="subitautofocus" [disabled]="okLoadingAdd | async"
      (click)="okAdd('yes')" value="{{VI_LANG.BUTTON.SAVE}}">
    <div class="custom-loading-h">
      <div *ngIf="boolAdd" class="k-i-loading"></div>
    </div>
  </div>
</ng-template>

<!--<kendo-dialog title="Thêm mới tổ bộ môn" minWidth="35%" *ngIf="openAdd" (close)="close('cancel')">-->
<!--    <kt-detail (deparmentout)="createDeparment($event)"></kt-detail>-->
<!--    <div class="modal-footer">-->
<!--        <button type="button" class="btn btn-secondary mr-2" (click)="close('no')">Đóng-->
<!--    </button>-->
<!--        <input type="submit" class="btn  btn-primary" id="subitautofocus" [disabled]="okLoadingAdd | async" (click)="okAdd('yes')" value="Lưu">-->
<!--        <div *ngIf="boolAdd" class="k-i-loading"></div>-->
<!--    </div>-->
<!--</kendo-dialog>-->

<ng-template #modelDelete let-c="close" let-d="dismiss">
  <div class="modal-header">
    <h4 class="modal-title" id="modal-basic-title-delete">Xóa tổ bộ môn</h4>
    <button kendoButton type="button" (click)="d('Save click')" [iconClass]="'fas fa-times'">
    </button>
  </div>
  <div class="modal-body">
    <div class="form-delete-h">
      <img class="d-block m-auto" src="/assets/media/bg/normal_u546.svg">
      <p class="text-center mt-5">{{VI_LANG.NOTIFICATION.CONFIRM_DELETE}}</p>
    </div>
  </div>
  <div class="modal-footer">
    <button type="button" class="btn btn-secondary mr-2" (click)="d('Save click')">{{VI_LANG.BUTTON.CANCEL}}
    </button>
    <input type="submit" class="btn  btn-primary" [disabled]="okLoadingDelete | async" (click)="delete(departmentEdit)"
      tabindex="0" id="deleteFaculty" value="{{VI_LANG.BUTTON.OK}}" #deleteOk />
    <div class="custom-loading-h">
      <div *ngIf="boolDelete" class="k-i-loading"></div>
    </div>
  </div>
</ng-template>

<!--<kendo-dialog title="Xóa tổ bộ môn" *ngIf="openDel" (close)="close('cancel')" tabindex="1">-->
<!--    <div class="question" style="display: flex">-->
<!--        <i class="far fa-question-circle" style="font-size: 100px; color: red"></i>-->
<!--        <p class="titelDelete">Quý thầy, cô có đồng ý hay không ?</p>-->
<!--    </div>-->
<!--    <div class="modal-footer">-->
<!--        <button type="button" class="btn btn-secondary mr-2" (click)="close('no')">Hủy bỏ-->
<!--    </button>-->
<!--        <input type="submit" class="btn  btn-primary" [disabled]="okLoadingDelete | async" (click)="delete(departmentEdit)" tabindex="0" value="Đồng ý" #deleteOk/>-->
<!--        <div *ngIf="boolDelete" class="k-i-loading"></div>-->
<!--    </div>-->
<!--</kendo-dialog>-->

<ng-template #modelEdit let-c="close" let-d="dismiss">
  <div class="modal-header" style="padding: 10px !important;">
    <h4 class="modal-title" id="modal-basic-title-edit">Cập nhật tổ bộ môn</h4>
    <button kendoButton type="button" (click)="d('Save click')" [iconClass]="'fas fa-times'">
    </button>
  </div>
  <div class="modal-body" style="padding: 0 !important;">
    <kt-detail (deparmentout)="createDeparment($event)" [deparmentx]="departmentEdit"></kt-detail>
  </div>
  <div class="modal-footer">
    <button type="button" class="btn btn-secondary mr-2" (click)="d('Save click')">{{VI_LANG.BUTTON.CLOSE}}
    </button>
    <input type="submit" class="btn  btn-primary" [disabled]="okLoadingEdit | async" (click)="okEdit('yes')"
      value="{{VI_LANG.BUTTON.SAVE}}" />
    <div class="custom-loading-h">
      <div *ngIf="boolEdit" class="k-i-loading"></div>
    </div>
  </div>
</ng-template>

<!--<kendo-dialog title="Cập nhật tổ bộ môn" minWidth="35%" *ngIf="opendEdit" (close)="close('cancel')">-->
<!--    <kt-detail (deparmentout)="createDeparment($event)" [deparmentx]="departmentEdit"></kt-detail>-->
<!--    <div class="modal-footer">-->
<!--        <button type="button" class="btn btn-secondary mr-2" (click)="close('no')">Đóng-->
<!--    </button>-->
<!--        <input type="submit" class="btn  btn-primary" [disabled]="okLoadingEdit | async" (click)="okEdit('yes')" value="Lưu">-->
<!--        <div *ngIf="boolEdit" class="k-i-loading"></div>-->
<!--    </div>-->
<!--</kendo-dialog>-->
